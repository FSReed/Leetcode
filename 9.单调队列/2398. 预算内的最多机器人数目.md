# [Description](https://leetcode.cn/problems/maximum-number-of-robots-within-budget/description/)

## Code

写了蛮久，不过思路是对的

```cpp
class Solution {
public:
    int maximumRobots(vector<int>& chargeTimes, vector<int>& runningCosts, long long budget) {
        // 从左到右滑窗，单调队列维护最大时间，一个数字维护sum，维护一个答案
        long long cost_sum = 0;
        int ans = 0;
        int n = chargeTimes.size();
        std::deque<int> dq;
        int left = 0;
        for (auto right = 0; right < n; ++right) {
            int time = chargeTimes[right];
            while (!dq.empty() && time > chargeTimes[dq.back()]) {
                dq.pop_back();
            }
            dq.push_back(right);
            cost_sum += runningCosts[right];
            long long curr = chargeTimes[dq.front()] + (right - left + 1) * cost_sum;
            while (curr > budget) {
                if (chargeTimes[left] == chargeTimes[dq.front()]) {
                    dq.pop_front();
                }
                cost_sum -= runningCosts[left];
                ++left;
                curr = dq.empty() ? 0 : chargeTimes[dq.front()] + (right - left + 1) * cost_sum;
            }
            ans = std::max(ans, right - left + 1);
        }
        return ans;
    }
};
```
